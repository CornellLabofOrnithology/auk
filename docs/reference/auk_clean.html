<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Clean an eBird data file — auk_clean • auk</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Clean an eBird data file — auk_clean" />

<meta property="og:description" content="Some rows in the eBird Basic Dataset (EBD) may have an incorrect number of
columns, often resulting from tabs embedded in the comments field. This
function drops these problematic records. Note that this function typically
takes at least 3 hours to run on the full dataset" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">auk</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/auk.html">Vignette</a>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/CornellLabofOrnithology/auk">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Clean an eBird data file</h1>
    <small>Source: <a href='https://github.com/CornellLabofOrnithology/auk/blob/master/R/auk-clean.r'><code>R/auk-clean.r</code></a></small>
    </div>

    
    <p>Some rows in the eBird Basic Dataset (EBD) may have an incorrect number of
columns, often resulting from tabs embedded in the comments field. This
function drops these problematic records. <strong>Note that this function typically
takes at least 3 hours to run on the full dataset</strong></p>
    

    <pre class="usage"><span class='fu'>auk_clean</span>(<span class='no'>f_in</span>, <span class='no'>f_out</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>"\t"</span>, <span class='kw'>remove_text</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>f_in</th>
      <td><p>character; input file.</p></td>
    </tr>
    <tr>
      <th>f_out</th>
      <td><p>character; output file.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>character; the input field separator, the basic dataset is tab
separated by default. Must only be a single character and space delimited
is not allowed since spaces appear in many of the fields.</p></td>
    </tr>
    <tr>
      <th>remove_text</th>
      <td><p>logical; whether all free text entry columns should be
removed. These columns include comments, location names, and observer
names. These columns cause import errors due to special characters and
increase the file size, yet are rarely valuable for analytical
applications, so may be removed. Setting this argument to <code>TRUE</code> can lead
to a significant reduction in file size.</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>logical; overwrite output file if it already exists</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If AWK ran without errors, the output filename is returned, however,
if an error was encountered the exit code is returned.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function can clean a basic dataset file or a sampling file.</p>
<p>Calling this function requires that the command line utility AWK is
installed. Linux and Mac machines should have AWK by default, Windows users
will likely need to install <a href='https://www.cygwin.com'>Cygwin</a>.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># get the path to the example data included in the package</span>
<span class='co'># in practice, provide path to ebd, e.g. f &lt;- "data/ebd_relFeb-2018.txt</span>
<span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata/ebd-sample_messy.txt"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"auk"</span>)
<span class='co'># output to a temp file for example</span>
<span class='co'># in practice, provide path to output file</span>
<span class='co'># e.g. f_out &lt;- "output/ebd_clean.txt"</span>
<span class='no'>f_out</span> <span class='kw'>&lt;-</span> <span class='fu'>tempfile</span>()

<span class='co'># clean file to remove problem rows</span>
<span class='fu'>auk_clean</span>(<span class='no'>f</span>, <span class='no'>f_out</span>)
<span class='co'># number of lines in input</span>
<span class='fu'>length</span>(<span class='fu'>readLines</span>(<span class='no'>f</span>))
<span class='co'># number of lines in output</span>
<span class='fu'>length</span>(<span class='fu'>readLines</span>(<span class='no'>f_out</span>))

<span class='co'># note that the extra blank column has also been removed</span>
<span class='fu'>ncol</span>(<span class='fu'>read.delim</span>(<span class='no'>f</span>, <span class='kw'>nrows</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>quote</span> <span class='kw'>=</span> <span class='st'>""</span>))
<span class='fu'>ncol</span>(<span class='fu'>read.delim</span>(<span class='no'>f_out</span>, <span class='kw'>nrows</span> <span class='kw'>=</span> <span class='fl'>5</span>, <span class='kw'>quote</span> <span class='kw'>=</span> <span class='st'>""</span>))
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='http://eliotmiller.weebly.com/'>Eliot Miller</a>, Wesley Hochachka.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

