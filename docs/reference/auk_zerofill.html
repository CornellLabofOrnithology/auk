<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read and zero-fill an eBird data file — auk_zerofill • auk</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Read and zero-fill an eBird data file — auk_zerofill" />

<meta property="og:description" content="Read an eBird Basic Dataset (EBD) file, and associated sampling event data
file, to produce a zero-filled, presence-absence dataset. The EBD contains
bird sightings and the sampling event data is a set of all checklists, they
can be combined to infer absence data by assuming any species not reported on
a checklist was had a count of zero." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">auk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/auk.html">Vignette</a>
</li>
<li>
  <a href="../reference/index.html">Function Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/CornellLabofOrnithology/auk">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read and zero-fill an eBird data file</h1>
    <small class="dont-index">Source: <a href='https://github.com/CornellLabofOrnithology/auk/blob/master/R/auk-zerofill.r'><code>R/auk-zerofill.r</code></a></small>
    <div class="hidden name"><code>auk_zerofill.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Read an eBird Basic Dataset (EBD) file, and associated sampling event data
file, to produce a zero-filled, presence-absence dataset. The EBD contains
bird sightings and the sampling event data is a set of all checklists, they
can be combined to infer absence data by assuming any species not reported on
a checklist was had a count of zero.</p>
    
    </div>

    <pre class="usage"><span class='fu'>auk_zerofill</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>auk_zerofill</span>(<span class='no'>x</span>, <span class='no'>sampling_events</span>, <span class='no'>species</span>,
  <span class='no'>taxonomy_version</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>unique</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rollup</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>drop_higher</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>complete</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for character</span>
<span class='fu'>auk_zerofill</span>(<span class='no'>x</span>, <span class='no'>sampling_events</span>, <span class='no'>species</span>,
  <span class='no'>taxonomy_version</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>unique</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rollup</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>drop_higher</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>complete</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>"\t"</span>, <span class='no'>...</span>)

<span class='co'># S3 method for auk_ebd</span>
<span class='fu'>auk_zerofill</span>(<span class='no'>x</span>, <span class='no'>species</span>, <span class='no'>taxonomy_version</span>,
  <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>unique</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>rollup</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>drop_higher</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>complete</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='st'>"\t"</span>, <span class='no'>...</span>)

<span class='fu'>collapse_zerofill</span>(<span class='no'>x</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>filename, <code>data.frame</code> of eBird observations, or <code>auk_ebd</code> object
with associated output files as created by <code><a href='auk_filter.html'>auk_filter()</a></code>. If a filename is
provided, it must point to the EBD and the <code>sampling_events</code> argument must
point to the sampling event data file. If a <code>data.frame</code> is provided it
should have been imported with <code><a href='read_ebd.html'>read_ebd()</a></code>, to ensure the variables names
have been set correctly, and it must have been passed through
<code><a href='auk_unique.html'>auk_unique()</a></code> to ensure duplicate group checklists have been removed.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments passed to methods.</p></td>
    </tr>
    <tr>
      <th>sampling_events</th>
      <td><p>character or <code>data.frame</code>; filename for the sampling
event data or a <code>data.frame</code> of the same data. If a <code>data.frame</code> is
provided it should have been imported with <code><a href='read_ebd.html'>read_sampling()</a></code>, to ensure the
variables names have been set correctly, and it must have been passed
through <code><a href='auk_unique.html'>auk_unique()</a></code> to ensure duplicate group checklists have been
removed.</p></td>
    </tr>
    <tr>
      <th>species</th>
      <td><p>character; species to include in zero-filled dataset, provided
as scientific or English common names, or a mixture of both. These names
must match the official eBird Taxomony (<a href='ebird_taxonomy.html'>ebird_taxonomy</a>). To include all
species, leave this argument blank.</p></td>
    </tr>
    <tr>
      <th>taxonomy_version</th>
      <td><p>integer; the version (i.e. year) of the taxonomy. In
most cases, this should be left empty to use the version of the taxonomy
included in the package. See <code><a href='get_ebird_taxonomy.html'>get_ebird_taxonomy()</a></code>.</p></td>
    </tr>
    <tr>
      <th>collapse</th>
      <td><p>logical; whether to call <code>collapse_zerofill()</code> to return a
data frame rather than an <code>auk_zerofill</code> object.</p></td>
    </tr>
    <tr>
      <th>unique</th>
      <td><p>logical; should <code><a href='auk_unique.html'>auk_unique()</a></code> be run on the input data if it
hasn't already.</p></td>
    </tr>
    <tr>
      <th>rollup</th>
      <td><p>logical; should <code><a href='auk_rollup.html'>auk_rollup()</a></code> be run on the input data if it
hasn't already.</p></td>
    </tr>
    <tr>
      <th>drop_higher</th>
      <td><p>logical; whether to remove taxa above species during the
rollup process, e.g. "spuhs" like "duck sp.". See <code><a href='auk_rollup.html'>auk_rollup()</a></code>.</p></td>
    </tr>
    <tr>
      <th>complete</th>
      <td><p>logical; if <code>TRUE</code> (the default) all checklists are required
to be complete prior to zero-filling.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>character; single character used to separate fields within a row.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>By default, an <code>auk_zerofill</code> object, or a data frame if <code>collapse = TRUE</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>auk_zerofill()</code> generates an <code>auk_zerofill</code> object consisting of a list with
elements <code>observations</code> and <code>sampling_events</code>. <code>observations</code> is a data frame
giving counts and binary presence/absence data for each species.
<code>sampling_events</code> is a data frame with checklist level information. The two
data frames can be connected via the <code>checklist_id</code> field. This format is
efficient for storage since the checklist columns are not duplicated for each
species, however, working with the data often requires joining the two data
frames together.</p>
<p>To return a data frame, set <code>collapse = TRUE</code>. Alternatively,
<code>zerofill_collapse()</code> generates a data frame from an <code>auk_zerofill</code> object,
by joining the two data frames together to produce a single data frame in
which each row provides both checklist and species information for a
sighting.</p>
<p>The list of species is checked against the eBird taxonomy for validity. This
taxonomy is updated once a year in August. The <code>auk</code> package includes a copy
of the eBird taxonomy, current at the time of release; however, if the EBD
and <code>auk</code> versions are not aligned, you may need to explicitly specify which
version of the taxonomy to use, in which case the eBird API will be queried
to get the correct version of the taxonomy.</p>
    
    <h2 class="hasAnchor" id="methods-by-class-"><a class="anchor" href="#methods-by-class-"></a>Methods (by class)</h2>

    <ul>
<li><p><code>data.frame</code>: EBD data frame.</p></li>
<li><p><code>character</code>: Filename of EBD.</p></li>
<li><p><code>auk_ebd</code>: <code>auk_ebd</code> object output from <code><a href='auk_filter.html'>auk_filter()</a></code>. Must
have had a sampling event data file set in the original call to
<code><a href='auk_ebd.html'>auk_ebd()</a></code>.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other import: <code><a href='read_ebd.html'>read_ebd</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># read and zero-fill the ebd data</span>
<span class='no'>f_ebd</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='st'>"extdata/zerofill-ex_ebd.txt"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"auk"</span>)
<span class='no'>f_smpl</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/system.file'>system.file</a></span>(<span class='st'>"extdata/zerofill-ex_sampling.txt"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"auk"</span>)
<span class='fu'>auk_zerofill</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>f_ebd</span>, <span class='kw'>sampling_events</span> <span class='kw'>=</span> <span class='no'>f_smpl</span>)</div><div class='output co'>#&gt; Zero-filled EBD: 619 unique checklists, for 3 species.</div><div class='input'>
<span class='co'># use the species argument to only include a subset of species</span>
<span class='fu'>auk_zerofill</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>f_ebd</span>, <span class='kw'>sampling_events</span> <span class='kw'>=</span> <span class='no'>f_smpl</span>,
             <span class='kw'>species</span> <span class='kw'>=</span> <span class='st'>"Collared Kingfisher"</span>)</div><div class='output co'>#&gt; Zero-filled EBD: 619 unique checklists, for 1 species.</div><div class='input'>
<span class='co'># to return a data frame use collapse = TRUE</span>
<span class='no'>ebd_df</span> <span class='kw'>&lt;-</span> <span class='fu'>auk_zerofill</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>f_ebd</span>, <span class='kw'>sampling_events</span> <span class='kw'>=</span> <span class='no'>f_smpl</span>, <span class='kw'>collapse</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#methods-by-class-">Methods (by class)</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://strimas.com'>Matthew Strimas-Mackey</a>, <a href='http://eliotmiller.weebly.com/'>Eliot Miller</a>, Wesley Hochachka.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

