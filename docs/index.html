<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>eBird Data Extraction and Processing with AWK • auk</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="eBird Data Extraction and Processing with AWK">
<meta property="og:description" content="Extract and process bird sightings records from eBird 
    (&lt;http://ebird.org&gt;), an online tool for recording bird observations. 
    Public access to the full eBird database is via the eBird Basic Dataset 
    (EBD; see &lt;http://ebird.org/ebird/data/download&gt; for access), a downloadable 
    text file. This package is an interface to AWK for extracting data from the 
    EBD based on taxonomic, spatial, or temporal filters, to produce a 
    manageable file size that can be imported into R.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">auk</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/auk.html">Vignette</a>
</li>
<li>
  <a href="reference/index.html">Function Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CornellLabofOrnithology/auk">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="auk-working-with-ebird-data-in-r" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#auk-working-with-ebird-data-in-r" class="anchor"></a>auk: working with eBird data in R <img src="hex-logo/auk.svg" align="right" width="140/">
</h1></div>
<p><a href="http://www.gnu.org/licenses/gpl-3.0"><img src="https://img.shields.io/badge/License-GPL%20v3-blue.svg" alt="License: GPL v3"></a> <a href="https://travis-ci.org/CornellLabofOrnithology/auk"><img src="https://img.shields.io/travis/CornellLabofOrnithology/auk/master.svg?label=Mac%20OSX%20%26%20Linux" alt="Travis-CI Build Status"></a> <a href="https://ci.appveyor.com/project/mstrimas/auk"><img src="https://img.shields.io/appveyor/ci/mstrimas/auk/master.svg?label=Windows" alt="AppVeyor Build Status"></a> <a href="https://codecov.io/github/CornellLabofOrnithology/auk?branch=master"><img src="https://img.shields.io/codecov/c/github/CornellLabofOrnithology/auk/master.svg" alt="Coverage Status"></a> <br><a href="https://github.com/ropensci/onboarding/issues/136"><img src="https://badges.ropensci.org/136_status.svg" alt="rOpenSci"></a> <a href="https://cran.r-project.org/package=auk"><img src="http://www.r-pkg.org/badges/version/auk" alt="CRAN_Status_Badge"></a> <a href="http://www.r-pkg.org/pkg/auk"><img src="http://cranlogs.r-pkg.org/badges/grand-total/auk?color=brightgreen" alt="Downloads"></a></p>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p><a href="http://www.ebird.org">eBird</a> is an online tool for recording bird observations. Since its inception, nearly 500 million records of bird sightings (i.e. combinations of location, date, time, and bird species) have been collected, making eBird one of the largest citizen science projects in history and an extremely valuable resource for bird research and conservation. The full eBird database is packaged as a text file and available for download as the <a href="http://ebird.org/ebird/data/download">eBird Basic Dataset (EBD)</a>. Due to the large size of this dataset, it must be filtered to a smaller subset of desired observations before reading into R. This filtering is most efficiently done using AWK, a Unix utility and programming language for processing column formatted text data. This package acts as a front end for AWK, allowing users to filter eBird data before import into R.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># cran release</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">"auk"</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># or install the development version from github</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"CornellLabofOrnithology/auk"</span>)</a></code></pre></div>
<p><code>auk</code> requires the Unix utility AWK, which is available on most Linux and Mac OS X machines. Windows users will first need to install <a href="https://www.cygwin.com">Cygwin</a> before using this package. Note that <strong>Cygwin must be installed in the default location</strong> (<code>C:/cygwin/bin/gawk.exe</code> or <code>C:/cygwin64/bin/gawk.exe</code>) in order for <code>auk</code> to work.</p>
</div>
<div id="vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#vignette" class="anchor"></a>Vignette</h2>
<p>Full details on using <code>auk</code> to produce both presence-only and presence-absence data are outlined in the vignette, which can be accessed with <code><a href="articles/auk.html">vignette("auk")</a></code>.</p>
</div>
<div id="auk-vs--rebird" class="section level2">
<h2 class="hasAnchor">
<a href="#auk-vs--rebird" class="anchor"></a><code>auk</code> vs. <code>rebird</code>
</h2>
<p>Those interested in eBird data may also want to consider <a href="https://github.com/ropensci/rebird"><code>rebird</code></a>, an R package that provides an interface to the <a href="https://confluence.cornell.edu/display/CLOISAPI/eBirdAPIs">eBird APIs</a>. The functions in <code>rebird</code> are mostly limited to accessing recent (i.e. within the last 30 days) observations, although <code>ebirdfreq()</code> does provide historical frequency of observation data. In contrast, <code>auk</code> gives access to the full set of ~ 500 million eBird observations. For most ecological applications, users will require <code>auk</code>; however, for some use cases, e.g. building tools for birders, <code>rebird</code> provides a quick and easy way to access data.</p>
</div>
<div id="a-note-on-versions" class="section level2">
<h2 class="hasAnchor">
<a href="#a-note-on-versions" class="anchor"></a>A note on versions</h2>
<p>This package contains a current (as of the time of package release) version of the <a href="http://help.ebird.org/customer/portal/articles/1006825-the-ebird-taxonomy">bird taxonomy used by eBird</a>. This taxonomy determines the species that can be reported in eBird and therefore the species that users of <code>auk</code> can extract. eBird releases an updated taxonomy once a year, typically in August, at which time <code>auk</code> will be updated to include the current taxonomy. When using <code>auk</code>, users should be careful to ensure that the version they’re using is in sync with the eBird Basic Dataset they’re working with. This is most easily accomplished by always using the must recent version of <code>auk</code> and the most recent release of the dataset.</p>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick start</h2>
<p>This package uses the command-line program AWK to extract subsets of the eBird Basic Dataset for use in R. This is a multi-step process:</p>
<ol style="list-style-type: decimal">
<li>Define a reference to the eBird data file.</li>
<li>Define a set of spatial, temporal, or taxonomic filters. Each type of filter corresponds to a different function, e.g. <code>auk_species</code> to filter by species. At this stage the filters are only set up, no actual filtering is done until the next step.</li>
<li>Filter the eBird data text file, producing a new text file with only the selected rows.</li>
<li>Import this text file into R as a data frame.</li>
</ol>
<p>Because the eBird dataset is so large, step 3 typically takes several hours to run. Here’s a simple example that extract all Gray Jay records from within Canada.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(auk)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># path to the ebird data file, here a sample included in the package</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co"># get the path to the example data included in the package</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co"># in practice, provide path to ebd, e.g. f_in &lt;- "data/ebd_relFeb-2018.txt</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">f_in &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata/ebd-sample.txt"</span>, <span class="dt">package =</span> <span class="st">"auk"</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co"># output text file</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">f_out &lt;-<span class="st"> "ebd_filtered_grja.txt"</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">ebird_data &lt;-<span class="st"> </span>f_in <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="st">  </span><span class="co"># 1. reference file</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">  </span><span class="kw"><a href="reference/auk_ebd.html">auk_ebd</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="st">  </span><span class="co"># 2. define filters</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="st">  </span><span class="kw"><a href="reference/auk_species.html">auk_species</a></span>(<span class="dt">species =</span> <span class="st">"Gray Jay"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="reference/auk_country.html">auk_country</a></span>(<span class="dt">country =</span> <span class="st">"Canada"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="st">  </span><span class="co"># 3. run filtering</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="reference/auk_filter.html">auk_filter</a></span>(<span class="dt">file =</span> f_out) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="st">  </span><span class="co"># 4. read text file into r data frame</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="reference/read_ebd.html">read_ebd</a></span>()</a></code></pre></div>
<p>For those not familiar with the pipe operator (<code>%&gt;%</code>), the above code could be rewritten:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">f_in &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata/ebd-sample.txt"</span>, <span class="dt">package =</span> <span class="st">"auk"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">f_out &lt;-<span class="st"> "ebd_filtered_grja.txt"</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">ebd &lt;-<span class="st"> </span><span class="kw"><a href="reference/auk_ebd.html">auk_ebd</a></span>(f_in)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">ebd_filters &lt;-<span class="st"> </span><span class="kw"><a href="reference/auk_species.html">auk_species</a></span>(ebd, <span class="dt">species =</span> <span class="st">"Gray Jay"</span>)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">ebd_filters &lt;-<span class="st"> </span><span class="kw"><a href="reference/auk_country.html">auk_country</a></span>(ebd_filters, <span class="dt">country =</span> <span class="st">"Canada"</span>)</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">ebd_filtered &lt;-<span class="st"> </span><span class="kw"><a href="reference/auk_filter.html">auk_filter</a></span>(ebd_filters, <span class="dt">file =</span> f_out)</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">ebd_df &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_ebd.html">read_ebd</a></span>(ebd_filtered)</a></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="cleaning" class="section level3">
<h3 class="hasAnchor">
<a href="#cleaning" class="anchor"></a>Cleaning</h3>
<p>Some rows in the dataset may have an incorrect number of columns, typically from problematic characters in the comments fields, and the dataset has an extra blank column at the end. The function <code><a href="reference/auk_clean.html">auk_clean()</a></code> drops these erroneous records and removes the blank column.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">library</span>(auk)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># get the path to the example data included in the package</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co"># in practice, provide path to ebd, e.g. f &lt;- "data/ebd_relFeb-2018.txt</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4">f &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata/ebd-sample_messy.txt"</span>, <span class="dt">package =</span> <span class="st">"auk"</span>)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co"># output to a temp file for example --&gt;</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co"># in practice, provide path to output file --&gt;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co"># e.g. f_out &lt;- "output/ebd_clean.txt" --&gt;</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8">f_out &lt;-<span class="st"> </span><span class="kw">tempfile</span>()</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co"># remove problem records</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="kw"><a href="reference/auk_clean.html">auk_clean</a></span>(f, f_out)</a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co">#&gt; [1] "/var/folders/mg/qh40qmqd7376xn8qxd6hm5lwjyy0h2/T//RtmpzLRlkl/file5add6722caf4"</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co"># number of lines in input</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="kw">length</span>(<span class="kw">readLines</span>(f))</a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt; [1] 51</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co"># number of lines in output</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="kw">length</span>(<span class="kw">readLines</span>(f_out))</a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; [1] 46</span></a></code></pre></div>
</div>
<div id="filtering" class="section level3">
<h3 class="hasAnchor">
<a href="#filtering" class="anchor"></a>Filtering</h3>
<p><code>auk</code> uses a <a href="http://r4ds.had.co.nz/pipes.html">pipeline-based workflow</a> for defining filters, which can then be compiled into an AWK script. Users should start by defining a reference to the dataset file with <code><a href="reference/auk_ebd.html">auk_ebd()</a></code>. Then any of the following filters can be applied:</p>
<ul>
<li>
<code><a href="reference/auk_species.html">auk_species()</a></code>: filter by species using common or scientific names.</li>
<li>
<code><a href="reference/auk_country.html">auk_country()</a></code>: filter by country using the standard English names or <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 2-letter country codes</a>.</li>
<li>
<code><a href="reference/auk_state.html">auk_state()</a></code>: filter by state using eBird state codes, see <code><a href="reference/ebird_states.html">?ebird_states</a></code>.</li>
<li>
<code><a href="reference/auk_bcr.html">auk_bcr()</a></code>: filter by <a href="http://nabci-us.org/resources/bird-conservation-regions/">Bird Conservation Region (BCR)</a> using BCR codes, see <code><a href="reference/bcr_codes.html">?bcr_codes</a></code>.</li>
<li>
<code><a href="reference/auk_bbox.html">auk_bbox()</a></code>: filter by spatial bounding box, i.e. a range of latitudes and longitudes in decimal degrees.</li>
<li>
<code><a href="reference/auk_date.html">auk_date()</a></code>: filter to checklists from a range of dates. To extract observations from a range of dates, regardless of year, use the wildcard “<code>*</code>” in place of the year, e.g. <code>date = c("*-05-01", "*-06-30")</code> for observations from May and June of any year.</li>
<li>
<code><a href="reference/auk_last_edited.html">auk_last_edited()</a></code>: filter to checklists from a range of last edited dates, useful for extracting just new or recently edited data.</li>
<li>
<code><a href="reference/auk_protocol.html">auk_protocol()</a></code>: filter to checklists that following a specific search protocol, either stationary, traveling, or casual.</li>
<li>
<code><a href="reference/auk_project.html">auk_project()</a></code>: filter to checklists collected as part of a specific project (e.g. a breeding bird survey).</li>
<li>
<code><a href="reference/auk_time.html">auk_time()</a></code>: filter to checklists started during a range of times-of-day.</li>
<li>
<code><a href="reference/auk_duration.html">auk_duration()</a></code>: filter to checklists with observation durations within a given range.</li>
<li>
<code><a href="reference/auk_distance.html">auk_distance()</a></code>: filter to checklists with distances travelled within a given range.</li>
<li>
<code><a href="reference/auk_breeding.html">auk_breeding()</a></code>: only retain observations that have an associate breeding bird atlas code.</li>
<li>
<code><a href="reference/auk_complete.html">auk_complete()</a></code>: only retain checklists in which the observer has specified that they recorded all species seen or heard. It is necessary to retain only complete records for the creation of presence-absence data, because the “absence”" information is inferred by the lack of reporting of a species on checklists.</li>
</ul>
<p>Note that all of the functions listed above only modify the <code>auk_ebd</code> object, in order to define the filters. Once the filters have been defined, the filtering is actually conducted using <code><a href="reference/auk_filter.html">auk_filter()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># sample data</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">f &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata/ebd-sample.txt"</span>, <span class="dt">package =</span> <span class="st">"auk"</span>)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co"># define an EBD reference and a set of filters</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">ebd &lt;-<span class="st"> </span><span class="kw"><a href="reference/auk_ebd.html">auk_ebd</a></span>(f) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="st">  </span><span class="co"># species: common and scientific names can be mixed</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="reference/auk_species.html">auk_species</a></span>(<span class="dt">species =</span> <span class="kw">c</span>(<span class="st">"Gray Jay"</span>, <span class="st">"Cyanocitta cristata"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="st">  </span><span class="co"># country: codes and names can be mixed; case insensitive</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="st">  </span><span class="kw"><a href="reference/auk_country.html">auk_country</a></span>(<span class="dt">country =</span> <span class="kw">c</span>(<span class="st">"US"</span>, <span class="st">"Canada"</span>, <span class="st">"mexico"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="st">  </span><span class="co"># bbox: long and lat in decimal degrees</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="st">  </span><span class="co"># formatted as `c(lng_min, lat_min, lng_max, lat_max)`</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="st">  </span><span class="kw"><a href="reference/auk_bbox.html">auk_bbox</a></span>(<span class="dt">bbox =</span> <span class="kw">c</span>(<span class="op">-</span><span class="dv">100</span>, <span class="dv">37</span>, <span class="dv">-80</span>, <span class="dv">52</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="st">  </span><span class="co"># date: use standard ISO date format `"YYYY-MM-DD"`</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="reference/auk_date.html">auk_date</a></span>(<span class="dt">date =</span> <span class="kw">c</span>(<span class="st">"2012-01-01"</span>, <span class="st">"2012-12-31"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="st">  </span><span class="co"># time: 24h format</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="reference/auk_time.html">auk_time</a></span>(<span class="dt">start_time =</span> <span class="kw">c</span>(<span class="st">"06:00"</span>, <span class="st">"09:00"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"><span class="st">  </span><span class="co"># duration: length in minutes of checklists</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="reference/auk_duration.html">auk_duration</a></span>(<span class="dt">duration =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">60</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"><span class="st">  </span><span class="co"># complete: all species seen or heard are recorded</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"><span class="st">  </span><span class="kw"><a href="reference/auk_complete.html">auk_complete</a></span>()</a>
<a class="sourceLine" id="cb5-20" data-line-number="20">ebd</a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="co">#&gt; Input </span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co">#&gt;   EBD: /Users/mes335/Library/R/3.5/library/auk/extdata/ebd-sample.txt </span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="co">#&gt; Output </span></a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co">#&gt;   Filters not executed</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"><span class="co">#&gt; Filters </span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="co">#&gt;   Species: Cyanocitta cristata, Perisoreus canadensis</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"><span class="co">#&gt;   Countries: CA, MX, US</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"><span class="co">#&gt;   States: all</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"><span class="co">#&gt;   BCRs: all</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"><span class="co">#&gt;   Bounding box: Lon -100 - -80; Lat 37 - 52</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"><span class="co">#&gt;   Date: 2012-01-01 - 2012-12-31</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"><span class="co">#&gt;   Start time: 06:00-09:00</span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"><span class="co">#&gt;   Last edited date: all</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"><span class="co">#&gt;   Protocol: all</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="co">#&gt;   Project code: all</span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co">#&gt;   Duration: 0-60 minutes</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"><span class="co">#&gt;   Distance travelled: all</span></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="co">#&gt;   Records with breeding codes only: no</span></a>
<a class="sourceLine" id="cb5-41" data-line-number="41"><span class="co">#&gt;   Complete checklists only: yes</span></a></code></pre></div>
<p>In all cases, extensive checks are performed to ensure filters are valid. For example, species are checked against the official <a href="http://help.ebird.org/customer/portal/articles/1006825-the-ebird-taxonomy">eBird taxonomy</a> and countries are checked using the <a href="https://github.com/vincentarelbundock/countrycode"><code>countrycode</code></a> package.</p>
<p>Each of the functions described in the <em>Defining filters</em> section only defines a filter. Once all of the required filters have been set, <code><a href="reference/auk_filter.html">auk_filter()</a></code> should be used to compile them into an AWK script and execute it to produce an output file. So, as an example of bringing all of these steps together, the following commands will extract all Gray Jay and Blue Jay records from Canada and save the results to a tab-separated text file for subsequent use:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">output_file &lt;-<span class="st"> "ebd_filtered_blja-grja.txt"</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">ebd_filtered &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata/ebd-sample.txt"</span>, <span class="dt">package =</span> <span class="st">"auk"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="reference/auk_ebd.html">auk_ebd</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="reference/auk_species.html">auk_species</a></span>(<span class="dt">species =</span> <span class="kw">c</span>(<span class="st">"Gray Jay"</span>, <span class="st">"Cyanocitta cristata"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="reference/auk_country.html">auk_country</a></span>(<span class="dt">country =</span> <span class="st">"Canada"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="reference/auk_filter.html">auk_filter</a></span>(<span class="dt">file =</span> output_file)</a></code></pre></div>
<p><strong>Filtering the full dataset typically takes at least a couple hours</strong>, so set it running then go grab lunch!</p>
</div>
<div id="reading" class="section level3">
<h3 class="hasAnchor">
<a href="#reading" class="anchor"></a>Reading</h3>
<p>eBird Basic Dataset files can be read with <code><a href="reference/read_ebd.html">read_ebd()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">system.file</span>(<span class="st">"extdata/ebd-sample.txt"</span>, <span class="dt">package =</span> <span class="st">"auk"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="reference/read_ebd.html">read_ebd</a></span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw">str</span>()</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    495 obs. of  45 variables:</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;  $ checklist_id                : chr  "S38863093" "S9652135" "S11454809" "S6280429" ...</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;  $ global_unique_identifier    : chr  "URN:CornellLabOfOrnithology:EBIRD:OBS528315017" "URN:CornellLabOfOrnithology:EBIRD:OBS136971897" "URN:CornellLabOfOrnithology:EBIRD:OBS162106422" "URN:CornellLabOfOrnithology:EBIRD:OBS89861233" ...</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  $ last_edited_date            : chr  "2017-08-28 01:20:48" "2016-08-15 17:44:23" "2016-06-10 10:33:36" "2010-04-16 13:44:34" ...</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  $ taxonomic_order             : num  18772 18772 18772 18772 18772 ...</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  $ category                    : chr  "species" "species" "species" "species" ...</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  $ common_name                 : chr  "Green Jay" "Green Jay" "Green Jay" "Green Jay" ...</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  $ scientific_name             : chr  "Cyanocorax yncas" "Cyanocorax yncas" "Cyanocorax yncas" "Cyanocorax yncas" ...</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  $ observation_count           : chr  "4" "4" "1" "4" ...</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  $ breeding_bird_atlas_code    : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  $ breeding_bird_atlas_category: chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt;  $ age_sex                     : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt;  $ country                     : chr  "Mexico" "Mexico" "Honduras" "Mexico" ...</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt;  $ country_code                : chr  "MX" "MX" "HN" "MX" ...</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt;  $ state                       : chr  "Chiapas" "Yucatan" "Santa Barbara" "Tamaulipas" ...</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt;  $ state_code                  : chr  "MX-CHP" "MX-YUC" "HN-SB" "MX-TAM" ...</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt;  $ county                      : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt;  $ county_code                 : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt;  $ iba_code                    : chr  "MX_169" "MX_183" NA "MX_85" ...</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt;  $ bcr_code                    : int  61 55 NA 48 NA 60 60 60 60 60 ...</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt;  $ usfws_code                  : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt;  $ atlas_block                 : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt;  $ locality                    : chr  "07_020_Monterrey_SD_trad_P02" "Reserva de la Biosfera Ria Celestun (Yucatan)" "Dry scrub and coffee finca above Azacualpa 600 masl" "Camino de Gomez Farias a San Jose" ...</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt;  $ locality_id                 : chr  "L6220973" "L221497" "L1670276" "L876486" ...</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt;  $ locality_type               : chr  "P" "H" "P" "P" ...</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt;  $ latitude                    : num  15.4 21 15.4 23.1 17 ...</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt;  $ longitude                   : num  -92.5 -90.3 -88.5 -99.2 -88.9 ...</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt;  $ observation_date            : Date, format: "2011-12-16" "2012-01-18" ...</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt;  $ time_observations_started   : chr  "06:30:00" "10:00:00" "11:41:00" "11:00:00" ...</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt;  $ observer_id                 : chr  "obsr313215" "obsr202655" "obsr247263" "obsr162003" ...</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt;  $ sampling_event_identifier   : chr  "S38863093" "S9652135" "S11454809" "S6280429" ...</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">#&gt;  $ protocol_type               : chr  "Stationary" "Traveling" "Stationary" "Traveling" ...</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">#&gt;  $ protocol_code               : chr  "P21" "P22" "P21" "P22" ...</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="co">#&gt;  $ project_code                : chr  "EBIRD" "EBIRD" "EBIRD" "EBIRD" ...</span></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="co">#&gt;  $ duration_minutes            : int  10 90 28 120 90 10 10 10 10 10 ...</span></a>
<a class="sourceLine" id="cb7-39" data-line-number="39"><span class="co">#&gt;  $ effort_distance_km          : num  NA 6.437 NA 17 0.483 ...</span></a>
<a class="sourceLine" id="cb7-40" data-line-number="40"><span class="co">#&gt;  $ effort_area_ha              : num  NA NA NA NA NA NA NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-41" data-line-number="41"><span class="co">#&gt;  $ number_observers            : int  1 9 2 NA 10 1 1 1 1 1 ...</span></a>
<a class="sourceLine" id="cb7-42" data-line-number="42"><span class="co">#&gt;  $ all_species_reported        : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></a>
<a class="sourceLine" id="cb7-43" data-line-number="43"><span class="co">#&gt;  $ group_identifier            : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-44" data-line-number="44"><span class="co">#&gt;  $ has_media                   : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...</span></a>
<a class="sourceLine" id="cb7-45" data-line-number="45"><span class="co">#&gt;  $ approved                    : logi  TRUE TRUE TRUE TRUE TRUE TRUE ...</span></a>
<a class="sourceLine" id="cb7-46" data-line-number="46"><span class="co">#&gt;  $ reviewed                    : logi  FALSE FALSE FALSE FALSE FALSE FALSE ...</span></a>
<a class="sourceLine" id="cb7-47" data-line-number="47"><span class="co">#&gt;  $ reason                      : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-48" data-line-number="48"><span class="co">#&gt;  $ trip_comments               : chr  "Plcido Martn Morales Hernndez" NA "O Komar with Mayron Mejia (and Paul House and Iliam Rivera). We were on a hillside north of the town of Azacual"| __truncated__ NA ...</span></a>
<a class="sourceLine" id="cb7-49" data-line-number="49"><span class="co">#&gt;  $ species_comments            : chr  NA NA NA NA ...</span></a>
<a class="sourceLine" id="cb7-50" data-line-number="50"><span class="co">#&gt;  - attr(*, "rollup")= logi TRUE</span></a></code></pre></div>
</div>
</div>
<div id="presence-absence-data" class="section level2">
<h2 class="hasAnchor">
<a href="#presence-absence-data" class="anchor"></a>Presence-absence data</h2>
<p>For many applications, presence-only data are sufficient; however, for modeling and analysis, presence-absence data are required. <code>auk</code> includes functionality to produce presence-absence data from eBird checklists. For full details, consult the vignette: <code><a href="articles/auk.html">vignette("auk")</a></code>.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>This package is based on AWK scripts provided as part of the eBird Data Workshop given by Wesley Hochachka, Daniel Fink, Tom Auer, and Frank La Sorte at the 2016 NAOC on August 15, 2016.</p>
<p><code>auk</code> benefited significantly from the <a href="https://ropensci.org/">rOpenSci</a> review process, including helpful suggestions from <a href="https://github.com/aurielfournier">Auriel Fournier</a> and <a href="https://github.com/emhart">Edmund Hart</a>.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<pre><code>eBird Basic Dataset. Version: ebd_relFeb-2018. Cornell Lab of Ornithology, Ithaca, New York. May 2013.</code></pre>
<p><a href="http://ropensci.org"><img src="http://www.ropensci.org/public_images/github_footer.png"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=auk">https://​cloud.r-project.org/​package=auk</a>
</li>
<li>Browse source code at <br><a href="https://github.com/CornellLabofOrnithology/auk">https://​github.com/​CornellLabofOrnithology/​auk</a>
</li>
<li>Report a bug at <br><a href="https://github.com/CornellLabofOrnithology/auk/issues">https://​github.com/​CornellLabofOrnithology/​auk/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing auk</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="http://strimas.com">Matthew Strimas-Mackey</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8929-7776" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" height="16"></a> </li>
<li>
<a href="http://eliotmiller.weebly.com/">Eliot Miller</a> <br><small class="roles"> Author </small>  </li>
<li>Wesley Hochachka <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://strimas.com">Matthew Strimas-Mackey</a>, <a href="http://eliotmiller.weebly.com/">Eliot Miller</a>, Wesley Hochachka.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
