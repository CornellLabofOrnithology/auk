<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to auk • auk</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to auk">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">auk</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/auk.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/development.html">auk development</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/CornellLabofOrnithology/auk/blob/master/cheatsheet/auk-cheatsheet.pdf" class="external-link">Cheatsheet</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CornellLabofOrnithology/auk/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to auk</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CornellLabofOrnithology/auk/blob/HEAD/vignettes/auk.Rmd" class="external-link"><code>vignettes/auk.Rmd</code></a></small>
      <div class="hidden name"><code>auk.Rmd</code></div>

    </div>

    
    
<p><a href="http://www.ebird.org" class="external-link">eBird</a> is an online tool for
recording bird observations. Since its inception, nearly 500 million
records of bird sightings (i.e. combinations of location, date, time,
and bird species) have been collected, making eBird one of the largest
citizen science projects in history and an extremely valuable resource
for bird research and conservation. The full eBird database is packaged
as a text file and available for download as the <a href="http://ebird.org/ebird/data/download" class="external-link">eBird Basic Dataset
(EBD)</a>. Due to the large size of this dataset, it must be filtered to
a smaller subset of desired observations before reading into R. This
filtering is most efficiently done using AWK, a Unix utility and
programming language for processing column formatted text data. This
package acts as a front end for AWK, allowing users to filter eBird data
before import into R.</p>
<p>This vignette is divided into three sections. The first section
provides background on the eBird data and motivation for the development
of this package. The second section outlines the use of <code>auk</code>
for filtering text file to produce a presence-only dataset. The final
section demonstrates how <code>auk</code> can be used to produce
zero-filled, presence-absence (or more correctly presence–non-detection)
data, a necessity for many modeling and analysis applications.</p>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>This package uses the command-line program AWK to extract subsets of
the eBird Basic Dataset for use in R. This is a multi-step process:</p>
<ol style="list-style-type: decimal">
<li>Define a reference to the eBird data file.</li>
<li>Define a set of spatial, temporal, or taxonomic filters. Each type
of filter corresponds to a different function,
e.g. <code>auk_species</code> to filter by species. At this stage the
filters are only set up, no actual filtering is done until the next
step.</li>
<li>Filter the eBird data text file, producing a new text file with only
the selected rows.</li>
<li>Import this text file into R as a data frame.</li>
</ol>
<p>Because the eBird dataset is so large, step 3 typically takes several
hours to run. Here’s a simple example that extract all Canada Jay
records from within Canada.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cornelllabofornithology.github.io/auk/">auk</a></span><span class="op">)</span></span>
<span><span class="co"># path to the ebird data file, here a sample included in the package</span></span>
<span><span class="co"># in practice, provide path to ebd, e.g. input_file &lt;- "data/ebd_relFeb-2018.txt"</span></span>
<span><span class="va">input_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span></span>
<span><span class="co"># output text file</span></span>
<span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="st">"ebd_filtered_grja.txt"</span></span>
<span><span class="va">ebird_data</span> <span class="op">&lt;-</span> <span class="va">input_file</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># 1. reference file</span></span>
<span>  <span class="fu"><a href="../reference/auk_ebd.html">auk_ebd</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># 2. define filters</span></span>
<span>  <span class="fu"><a href="../reference/auk_species.html">auk_species</a></span><span class="op">(</span>species <span class="op">=</span> <span class="st">"Canada Jay"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_country.html">auk_country</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"Canada"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># 3. run filtering</span></span>
<span>  <span class="fu"><a href="../reference/auk_filter.html">auk_filter</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># 4. read text file into r data frame</span></span>
<span>  <span class="fu"><a href="../reference/read_ebd.html">read_ebd</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>For those not familiar with the pipe operator (<code>%&gt;%</code>),
the above code could be rewritten:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span></span>
<span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="st">"ebd_filtered_grja.txt"</span></span>
<span><span class="va">ebd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_ebd.html">auk_ebd</a></span><span class="op">(</span><span class="va">input_file</span><span class="op">)</span></span>
<span><span class="va">ebd_filters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_species.html">auk_species</a></span><span class="op">(</span><span class="va">ebd</span>, species <span class="op">=</span> <span class="st">"Canada Jay"</span><span class="op">)</span></span>
<span><span class="va">ebd_filters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_country.html">auk_country</a></span><span class="op">(</span><span class="va">ebd_filters</span>, country <span class="op">=</span> <span class="st">"Canada"</span><span class="op">)</span></span>
<span><span class="va">ebd_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_filter.html">auk_filter</a></span><span class="op">(</span><span class="va">ebd_filters</span>, file <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span></span>
<span><span class="va">ebd_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_ebd.html">read_ebd</a></span><span class="op">(</span><span class="va">ebd_filtered</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<div class="section level3">
<h3 id="the-ebird-basic-dataset">The eBird Basic Dataset<a class="anchor" aria-label="anchor" href="#the-ebird-basic-dataset"></a>
</h3>
<p>The eBird database currently contains nearly 500 million bird
observations, and this rate of increase is accelerating as new users
join eBird. These data are an extremely valuable tool both for basic
science and conservation; however, given the sheer amount of data,
accessing eBird data poses a unique challenge. Currently, access to the
complete set of eBird observations is provided via the eBird Basic
Dataset (EBD). This is a tab-separated text file, released quarterly,
containing all validated bird sightings in the eBird database at the
time of release. Each row corresponds to the sighting of a single
species within a checklist and, in addition to the species and number of
individuals reported, information is provided at the checklist level
(location, time, date, search effort, etc.).</p>
<p>In addition, eBird provides a Sampling Event Data file that contains
the checklist-level data for every valid checklist submitted to eBird,
including checklists for which no species of birds were reported. In
this file, each row corresponds to a checklist and only the
checklist-level variables are included, not the associated bird data.
While the eBird Basic Dataset provides presence-only data, it can be
combined with the Sampling Event Data file to produce presence-absence
data. This process is described below.</p>
<p>For full metadata on the both datasets, consult the documentation
provided when the <a href="http://ebird.org/ebird/data/download" class="external-link">files
are downloaded</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="auk-vs--rebird">
<code>auk</code> vs. <code>rebird</code><a class="anchor" aria-label="anchor" href="#auk-vs--rebird"></a>
</h2>
<p>Those interested in eBird data may also want to consider <a href="https://docs.ropensci.org/rebird/" class="external-link"><code>rebird</code></a>, an R
package that provides an interface to the <a href="https://confluence.cornell.edu/display/CLOISAPI/eBirdAPIs" class="external-link">eBird
APIs</a>. The functions in <code>rebird</code> are mostly limited to
accessing recent (i.e. within the last 30 days) observations, although
<code>ebirdfreq()</code> does provide historical frequency of
observation data. In contrast, <code>auk</code> gives access to the full
set of ~ 500 million eBird observations. For most ecological
applications, users will require <code>auk</code>; however, for some use
cases, e.g. building tools for birders, <code>rebird</code> provides a
quick and easy way to access data.</p>
<div class="section level3">
<h3 id="data-access">Data access<a class="anchor" aria-label="anchor" href="#data-access"></a>
</h3>
<p>To access eBird data, begin by <a href="https://secure.birds.cornell.edu/cassso/login" class="external-link">creating an eBird
account and signing in</a>. Then visit the <a href="http://ebird.org/ebird/data/download" class="external-link">Download Data</a> page.
eBird data access is free; however, you will need to <a href="http://ebird.org/ebird/data/request" class="external-link">request access</a> in order
to obtain access to the EBD. Filling out the access request form allows
eBird to keep track of the number of people using the data and obtain
information on the applications for which the data are used</p>
<p>Once you have access to the data, proceed to the <a href="http://ebird.org/ebird/data/download/ebd" class="external-link">download page</a>. There
are two download options: prepackage download and custom download.
Downloading the prepackaged option gives you access to the full global
dataset. If you choose this route, you’ll likely want to download both
the EBD (~ 25 GB) and corresponding Sampling Event Data (~ 2.5 GB). If
you know you’re likely to only need data for a single species, or a
small region, you can request a custom download be prepared consisting
of only a subset of the data. This will result in significantly smaller
files; however, note that custom requests that would result in huge
numbers of checklists (e.g. all records from the US) won’t work. In
either case, download and decompress the files.</p>
</div>
<div class="section level3">
<h3 id="example-data">Example data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h3>
<p>This package comes with two example datasets. The first is suitable
for practicing filtering the EBD and producing presence-only data. It’s
a sample of 400 records from the EBD. It contains data from North and
Central America from 2010-2012 on 3 jay species: Canada Jay, Blue Jay,
and Green Jay. It can be accessed with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cornelllabofornithology.github.io/auk/">auk</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span></span></code></pre></div>
<p>The second is suitable for producing zero-filled, presence-absence
data. It contains every sighting from Singapore in the first half of
2012 of Collared Kingfisher, White-throated Kingfisher, and Blue-eared
Kingfisher. The full Sampling Event Data file is also included, and
contains all checklists from Singapore in the first half of 2012. These
files can be accessed with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ebd</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/zerofill-ex_ebd.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span></span>
<span><span class="co"># sampling event data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/zerofill-ex_sampling.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Important note:</strong> in this vignette,
<code><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file()</a></code> is used to return the path to the example
data included in this package. When using <code>auk</code> in practice,
provide the path to the location of the EBD on your computer, this could
be a relative path, e.g. <code>"data/ebd_relFeb-2018.txt"</code>, or an
absolute path,
e.g. <code>"~/ebird/ebd_relFeb-2018/ebd_relFeb-2018.txt"</code>.</p>
</div>
<div class="section level3">
<h3 id="awk">AWK<a class="anchor" aria-label="anchor" href="#awk"></a>
</h3>
<p>R typically works with objects in memory and, as a result, there is a
hard limit on the size of objects that can be brought into R. Because
eBird contains nearly 500 million sightings, the eBird Basic Dataset is
an inherently large file (~150 GB uncompressed) and therefore impossible
to manipulate directly in R. Thus it is generally necessary to create a
subset of the file outside of R, then import this smaller subset for
analysis.</p>
<p>AWK is a Unix utility and programming language for processing column
formatted text data. It is highly flexible and extremely fast, making it
a valuable tool for pre-processing the eBird data in order to create the
smaller subset of data that is required. Users of the data can use AWK
to produce a smaller file, subsetting the full text file taxonomically,
spatially, or temporally, in order to produce a smaller file that can
then be loaded in to R for visualization, analysis, and modelling.</p>
<p>Although AWK is a powerful tool, it has three disadvantages: it
requires learning the syntax of a new language, it is only accessible
via the command line, and it results in a portion of your workflow
existing outside of R. This package is a wrapper for AWK specifically
designed for filtering eBird data The goal is to ease the use of the
this data by removing the hurdle of learning and using AWK.</p>
<p>Linux and Mac users should already have AWK installed on their
machines, however, Windows uses will need to install <a href="https://www.cygwin.com" class="external-link">Cygwin</a> to gain access to AWK. Note
that <strong>Cygwin should be installed in the default location</strong>
(<code>C:/cygwin/bin/gawk.exe</code> or
<code>C:/cygwin64/bin/gawk.exe</code>) in order for <code>auk</code> to
work. To check that AWK is installed and can be found run
<code>auk_getpath()</code>.</p>
<p>If AWK is installed in a non-standard location, or can’t be found by
<code>auk</code>, you can manually set the path to AWK. To do so, set
the <code>AWK_PATH</code> environment in your <code>.Renviron</code>
file. For example, Mac and Linux users might add the following line:</p>
<pre><code>AWK_PATH=/usr/bin/awk</code></pre>
<p>while Windows users might add:</p>
<pre><code>AWK_PATH=C:/cygwin64/bin/gawk.exe</code></pre>
</div>
<div class="section level3">
<h3 id="a-note-on-versions">A note on versions<a class="anchor" aria-label="anchor" href="#a-note-on-versions"></a>
</h3>
<p>This package contains a current (as of the time of package release)
version of the <a href="https://ebird.org/science/use-ebird-data/the-ebird-taxonomy" class="external-link">bird
taxonomy used by eBird</a>. This taxonomy determines the species that
can be reported in eBird and therefore the species that users of
<code>auk</code> can extract from the EBD. eBird releases an updated
taxonomy once a year, typically in August, at which time
<code>auk</code> will be updated to include the current taxonomy. When
using <code>auk</code>, users should be careful to ensure that the
version they’re using is in sync with the EBD file they’re working with.
This is most easily accomplished by always using the most recent version
of <code>auk</code> and the most recent release of the eBird Basic
Dataset</p>
</div>
</div>
<div class="section level2">
<h2 id="presence-data">Presence data<a class="anchor" aria-label="anchor" href="#presence-data"></a>
</h2>
<p>The most common use of the eBird data is to produce a set of bird
sightings, i.e. where and when was a given species seen. For example,
this type of data could be used to produce a map of sighting locations,
or to determine if a given bird has been seen in an area of interest.
For more analytic work, such as species distribution modeling, presence
and absence data are likely preferred (see Guillera-Arroita et
al. 2015). Producing presence-absence data will be covered in the next
section.</p>
<div class="section level3">
<h3 id="the-auk_ebd-object">The <code>auk_ebd</code> object<a class="anchor" aria-label="anchor" href="#the-auk_ebd-object"></a>
</h3>
<p>This package uses an <code>auk_ebd</code> object to keep track of the
input data file, any filters defined, and the output file that is
produced after filtering has been executed. By keeping everything
wrapped up in one object, the user can keep track of exactly what set of
input data and filters produced any given output data. To set up the
initial <code>auk_ebd</code> object, use <code><a href="../reference/auk_ebd.html">auk_ebd()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ebd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_ebd.html">auk_ebd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ebd</span></span>
<span><span class="co">#&gt; Input </span></span>
<span><span class="co">#&gt;   EBD: /private/var/folders/wf/y1p0nztd2ps95ppplsl5bjjr0000gs/T/RtmprjANm2/temp_libpath53c67c44101f/auk/extdata/ebd-sample.txt </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output </span></span>
<span><span class="co">#&gt;   Filters not executed</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Filters </span></span>
<span><span class="co">#&gt;   Species: all</span></span>
<span><span class="co">#&gt;   Countries: all</span></span>
<span><span class="co">#&gt;   States: all</span></span>
<span><span class="co">#&gt;   Counties: all</span></span>
<span><span class="co">#&gt;   BCRs: all</span></span>
<span><span class="co">#&gt;   Bounding box: full extent</span></span>
<span><span class="co">#&gt;   Years: all</span></span>
<span><span class="co">#&gt;   Date: all</span></span>
<span><span class="co">#&gt;   Start time: all</span></span>
<span><span class="co">#&gt;   Last edited date: all</span></span>
<span><span class="co">#&gt;   Protocol: all</span></span>
<span><span class="co">#&gt;   Project code: all</span></span>
<span><span class="co">#&gt;   Duration: all</span></span>
<span><span class="co">#&gt;   Distance travelled: all</span></span>
<span><span class="co">#&gt;   Records with breeding codes only: no</span></span>
<span><span class="co">#&gt;   Exotic Codes: all</span></span>
<span><span class="co">#&gt;   Complete checklists only: no</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="defining-filters">Defining filters<a class="anchor" aria-label="anchor" href="#defining-filters"></a>
</h3>
<p><code>auk</code> uses a <a href="https://r4ds.had.co.nz/pipes.html" class="external-link">pipeline-based workflow</a> for
defining filters, which can then be compiled into an AWK script. Any of
the following filters can be applied:</p>
<ul>
<li>
<code><a href="../reference/auk_species.html">auk_species()</a></code>: filter by species using common or
scientific names.</li>
<li>
<code><a href="../reference/auk_country.html">auk_country()</a></code>: filter by country using the standard
English names or <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="external-link">ISO 2-letter
country codes</a>.</li>
<li>
<code><a href="../reference/auk_state.html">auk_state()</a></code>: filter by state using the eBird state
codes, see <code><a href="../reference/ebird_states.html">?ebird_states</a></code>.</li>
<li>
<code><a href="../reference/auk_bcr.html">auk_bcr()</a></code>: filter by <a href="https://nabci-us.org/resources/bird-conservation-regions/" class="external-link">Bird
Conservation Region (BCR)</a> using BCR codes, see
<code><a href="../reference/bcr_codes.html">?bcr_codes</a></code>.</li>
<li>
<code><a href="../reference/auk_bbox.html">auk_bbox()</a></code>: filter by spatial bounding box, i.e. a
range of latitudes and longitudes in decimal degrees.</li>
<li>
<code><a href="../reference/auk_date.html">auk_date()</a></code>: filter to checklists from a range of dates.
To extract observations from a range of dates, regardless of year, use
the wildcard “<code>*</code>” in place of the year,
e.g. <code>date = c("*-05-01", "*-06-30")</code> for observations from
May and June of any year.</li>
<li>
<code><a href="../reference/auk_last_edited.html">auk_last_edited()</a></code>: filter to checklists from a range of
last edited dates, useful for extracting just new or recently edited
data.</li>
<li>
<code><a href="../reference/auk_protocol.html">auk_protocol()</a></code>: filter to checklists that following a
specific search protocol, either stationary, traveling, or casual.</li>
<li>
<code><a href="../reference/auk_project.html">auk_project()</a></code>: filter to checklists collected as part
of a specific project (e.g. a breeding bird survey).</li>
<li>
<code><a href="../reference/auk_time.html">auk_time()</a></code>: filter to checklists started during a range
of times-of-day.</li>
<li>
<code><a href="../reference/auk_duration.html">auk_duration()</a></code>: filter to checklists with observation
durations within a given range.</li>
<li>
<code><a href="../reference/auk_distance.html">auk_distance()</a></code>: filter to checklists with distances
travelled within a given range.</li>
<li>
<code><a href="../reference/auk_breeding.html">auk_breeding()</a></code>: only retain observations that have an
associate breeding bird atlas code.</li>
<li>
<code><a href="../reference/auk_complete.html">auk_complete()</a></code>: only retain checklists in which the
observer has specified that they recorded all species seen or heard. It
is necessary to retain only complete records for the creation of
presence-absence data, because the “absence” information is inferred by
the lack of reporting of a species on checklists.</li>
</ul>
<p>Note that all of the functions listed above only modify the
<code>auk_ebd</code> object, in order to define the filters. Once the
filters have been defined, the filtering is actually conducted using
<code><a href="../reference/auk_filter.html">auk_filter()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ebd_filters</span> <span class="op">&lt;-</span> <span class="va">ebd</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># species: common and scientific names can be mixed</span></span>
<span>  <span class="fu"><a href="../reference/auk_species.html">auk_species</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Canada Jay"</span>, <span class="st">"Cyanocitta cristata"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># country: codes and names can be mixed; case insensitive</span></span>
<span>  <span class="fu"><a href="../reference/auk_country.html">auk_country</a></span><span class="op">(</span>country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"US"</span>, <span class="st">"Canada"</span>, <span class="st">"mexico"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># bbox: long and lat in decimal degrees</span></span>
<span>  <span class="co"># formatted as `c(lng_min, lat_min, lng_max, lat_max)`</span></span>
<span>  <span class="fu"><a href="../reference/auk_bbox.html">auk_bbox</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100</span>, <span class="fl">37</span>, <span class="op">-</span><span class="fl">80</span>, <span class="fl">52</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># date: use standard ISO date format `"YYYY-MM-DD"`</span></span>
<span>  <span class="fu"><a href="../reference/auk_date.html">auk_date</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2012-01-01"</span>, <span class="st">"2012-12-31"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># time: 24h format</span></span>
<span>  <span class="fu"><a href="../reference/auk_time.html">auk_time</a></span><span class="op">(</span>start_time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"06:00"</span>, <span class="st">"09:00"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># duration: length in minutes of checklists</span></span>
<span>  <span class="fu"><a href="../reference/auk_duration.html">auk_duration</a></span><span class="op">(</span>duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">60</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># complete: all species seen or heard are recorded</span></span>
<span>  <span class="fu"><a href="../reference/auk_complete.html">auk_complete</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ebd_filters</span></span>
<span><span class="co">#&gt; Input </span></span>
<span><span class="co">#&gt;   EBD: /private/var/folders/wf/y1p0nztd2ps95ppplsl5bjjr0000gs/T/RtmprjANm2/temp_libpath53c67c44101f/auk/extdata/ebd-sample.txt </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output </span></span>
<span><span class="co">#&gt;   Filters not executed</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Filters </span></span>
<span><span class="co">#&gt;   Species: Cyanocitta cristata, Perisoreus canadensis</span></span>
<span><span class="co">#&gt;   Countries: CA, MX, US</span></span>
<span><span class="co">#&gt;   States: all</span></span>
<span><span class="co">#&gt;   Counties: all</span></span>
<span><span class="co">#&gt;   BCRs: all</span></span>
<span><span class="co">#&gt;   Bounding box: Lon -100 - -80; Lat 37 - 52</span></span>
<span><span class="co">#&gt;   Years: all</span></span>
<span><span class="co">#&gt;   Date: 2012-01-01 - 2012-12-31</span></span>
<span><span class="co">#&gt;   Start time: 06:00-09:00</span></span>
<span><span class="co">#&gt;   Last edited date: all</span></span>
<span><span class="co">#&gt;   Protocol: all</span></span>
<span><span class="co">#&gt;   Project code: all</span></span>
<span><span class="co">#&gt;   Duration: 0-60 minutes</span></span>
<span><span class="co">#&gt;   Distance travelled: all</span></span>
<span><span class="co">#&gt;   Records with breeding codes only: no</span></span>
<span><span class="co">#&gt;   Exotic Codes: all</span></span>
<span><span class="co">#&gt;   Complete checklists only: yes</span></span></code></pre></div>
<p>In all cases, extensive checks are performed to ensure filters are
valid. For example, species are checked against the official <a href="https://ebird.org/science/use-ebird-data/the-ebird-taxonomy" class="external-link">eBird
taxonomy</a> and countries are checked using the <a href="https://github.com/vincentarelbundock/countrycode" class="external-link"><code>countrycode</code></a>
package. This is particularly important because filtering is a time
consuming process, so catching errors in advance can avoid several hours
of wasted time.</p>
</div>
<div class="section level3">
<h3 id="executing-filters">Executing filters<a class="anchor" aria-label="anchor" href="#executing-filters"></a>
</h3>
<p>Each of the functions described in the <em>Defining filters</em>
section only defines a filter. Once all of the required filters have
been set, <code><a href="../reference/auk_filter.html">auk_filter()</a></code> should be used to compile them into
an AWK script and execute it to produce an output file. So, as an
example of bringing all of these steps together, the following commands
will extract all Canada Jay and Blue Jay records from Canada and save
the results to a tab-separated text file for subsequent use:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="st">"ebd_filtered_blja-grja.txt"</span></span>
<span><span class="va">ebd_jays</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_ebd.html">auk_ebd</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_species.html">auk_species</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Canada Jay"</span>, <span class="st">"Cyanocitta cristata"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_country.html">auk_country</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"Canada"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_filter.html">auk_filter</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span></span></code></pre></div>
<p><strong>Filtering the full EBD typically takes at least a couple
hours</strong>, so set it running then go grab lunch!</p>
</div>
<div class="section level3">
<h3 id="reading">Reading<a class="anchor" aria-label="anchor" href="#reading"></a>
</h3>
<p>eBird Basic Dataset files can be read with <code><a href="../reference/read_ebd.html">read_ebd()</a></code>.
This is a wrapper around <code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_delim()</a></code>.
<code><a href="../reference/read_ebd.html">read_ebd()</a></code> uses <code>stringsAsFactors = FALSE</code>,
<code>quote = ""</code>, sets column classes, and converts variable
names to <code>snake_case</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/read_ebd.html">read_ebd</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 398</span></span>
<span><span class="co">#&gt; Columns: 48</span></span>
<span><span class="co">#&gt; $ checklist_id              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "G1131664"<span style="color: #949494;">, </span>"G1131665"<span style="color: #949494;">, </span>"G1158137"<span style="color: #949494;">, </span>"G115813…</span></span>
<span><span class="co">#&gt; $ global_unique_identifier  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "URN:CornellLabOfOrnithology:EBIRD:OBS294400…</span></span>
<span><span class="co">#&gt; $ last_edited_date          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2021-03-29 21:21:52.583259"<span style="color: #949494;">, </span>"2020-02-01 20…</span></span>
<span><span class="co">#&gt; $ taxonomic_order           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 20724<span style="color: #949494;">, </span>20724<span style="color: #949494;">, </span>20674<span style="color: #949494;">, </span>20674<span style="color: #949494;">, </span>20724<span style="color: #949494;">, </span>20724<span style="color: #949494;">, </span>20…</span></span>
<span><span class="co">#&gt; $ category                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "species"<span style="color: #949494;">, </span>"species"<span style="color: #949494;">, </span>"species"<span style="color: #949494;">, </span>"species"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ taxon_concept_id          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "avibase-361B447A"<span style="color: #949494;">, </span>"avibase-361B447A"<span style="color: #949494;">, </span>"avi…</span></span>
<span><span class="co">#&gt; $ common_name               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Green Jay"<span style="color: #949494;">, </span>"Green Jay"<span style="color: #949494;">, </span>"Canada Jay"<span style="color: #949494;">, </span>"Can…</span></span>
<span><span class="co">#&gt; $ scientific_name           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Cyanocorax yncas"<span style="color: #949494;">, </span>"Cyanocorax yncas"<span style="color: #949494;">, </span>"Per…</span></span>
<span><span class="co">#&gt; $ exotic_code               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ observation_count         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2"<span style="color: #949494;">, </span>"6"<span style="color: #949494;">, </span>"1"<span style="color: #949494;">, </span>"1"<span style="color: #949494;">, </span>"X"<span style="color: #949494;">, </span>"3"<span style="color: #949494;">, </span>"4"<span style="color: #949494;">, </span>"3"<span style="color: #949494;">, </span>"6"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ breeding_code             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ breeding_category         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ behavior_code             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ age_sex                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ country                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "United States"<span style="color: #949494;">, </span>"United States"<span style="color: #949494;">, </span>"Canada"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ country_code              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "US"<span style="color: #949494;">, </span>"US"<span style="color: #949494;">, </span>"CA"<span style="color: #949494;">, </span>"CA"<span style="color: #949494;">, </span>"MX"<span style="color: #949494;">, </span>"MX"<span style="color: #949494;">, </span>"CA"<span style="color: #949494;">, </span>"U…</span></span>
<span><span class="co">#&gt; $ state                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Texas"<span style="color: #949494;">, </span>"Texas"<span style="color: #949494;">, </span>"British Columbia"<span style="color: #949494;">, </span>"Briti…</span></span>
<span><span class="co">#&gt; $ state_code                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "US-TX"<span style="color: #949494;">, </span>"US-TX"<span style="color: #949494;">, </span>"CA-BC"<span style="color: #949494;">, </span>"CA-BC"<span style="color: #949494;">, </span>"MX-NLE"…</span></span>
<span><span class="co">#&gt; $ county                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Zapata"<span style="color: #949494;">, </span>"Starr"<span style="color: #949494;">, </span>"Northern Rockies"<span style="color: #949494;">, </span>"Nort…</span></span>
<span><span class="co">#&gt; $ county_code               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "US-TX-505"<span style="color: #949494;">, </span>"US-TX-427"<span style="color: #949494;">, </span>"CA-BC-NR"<span style="color: #949494;">, </span>"CA-BC…</span></span>
<span><span class="co">#&gt; $ iba_code                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"MX_69"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ bcr_code                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 36<span style="color: #949494;">, </span>36<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>48<span style="color: #949494;">, </span>36<span style="color: #949494;">, </span>13<span style="color: #949494;">, </span>10<span style="color: #949494;">, </span>36<span style="color: #949494;">, </span>48<span style="color: #949494;">, </span>48<span style="color: #949494;">, </span>8<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ usfws_code                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ atlas_block               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ locality                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Zapata Library / City Park (LTC 085)"<span style="color: #949494;">, </span>"Fal…</span></span>
<span><span class="co">#&gt; $ locality_id               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "L846015"<span style="color: #949494;">, </span>"L128962"<span style="color: #949494;">, </span>"L343808"<span style="color: #949494;">, </span>"L343808"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ locality_type             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ latitude                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 26.90220<span style="color: #949494;">, </span>26.58361<span style="color: #949494;">, </span>58.82617<span style="color: #949494;">, </span>58.82617<span style="color: #949494;">, </span>25.5…</span></span>
<span><span class="co">#&gt; $ longitude                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -99.27106<span style="color: #949494;">, </span>-99.14529<span style="color: #949494;">, </span>-122.90187<span style="color: #949494;">, </span>-122.90187…</span></span>
<span><span class="co">#&gt; $ observation_date          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2011-11-14<span style="color: #949494;">, </span>2011-11-14<span style="color: #949494;">, </span>2011-06-14<span style="color: #949494;">, </span>2011-06…</span></span>
<span><span class="co">#&gt; $ time_observations_started <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "06:45:00"<span style="color: #949494;">, </span>"08:15:00"<span style="color: #949494;">, </span>"10:30:00"<span style="color: #949494;">, </span>"07:00:0…</span></span>
<span><span class="co">#&gt; $ observer_id               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "obsr554038"<span style="color: #949494;">, </span>"obsr146271"<span style="color: #949494;">, </span>"obsr12384"<span style="color: #949494;">, </span>"ob…</span></span>
<span><span class="co">#&gt; $ sampling_event_identifier <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "S21633922"<span style="color: #949494;">, </span>"S9118288"<span style="color: #949494;">, </span>"S22036612"<span style="color: #949494;">, </span>"S2203…</span></span>
<span><span class="co">#&gt; $ protocol_type             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Traveling"<span style="color: #949494;">, </span>"Traveling"<span style="color: #949494;">, </span>"Stationary"<span style="color: #949494;">, </span>"Sta…</span></span>
<span><span class="co">#&gt; $ protocol_code             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "P22"<span style="color: #949494;">, </span>"P22"<span style="color: #949494;">, </span>"P21"<span style="color: #949494;">, </span>"P21"<span style="color: #949494;">, </span>"P22"<span style="color: #949494;">, </span>"P22"<span style="color: #949494;">, </span>"P…</span></span>
<span><span class="co">#&gt; $ project_code              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "EBIRD"<span style="color: #949494;">, </span>"EBIRD"<span style="color: #949494;">, </span>"EBIRD"<span style="color: #949494;">, </span>"EBIRD"<span style="color: #949494;">, </span>"EBIRD"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ duration_minutes          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 30<span style="color: #949494;">, </span>60<span style="color: #949494;">, </span>60<span style="color: #949494;">, </span>90<span style="color: #949494;">, </span>90<span style="color: #949494;">, </span>90<span style="color: #949494;">, </span>90<span style="color: #949494;">, </span>35<span style="color: #949494;">, </span>60<span style="color: #949494;">, </span>60<span style="color: #949494;">, </span>75<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ effort_distance_km        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.609<span style="color: #949494;">, </span>3.219<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>1.000<span style="color: #949494;">, </span>1.500<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>3.21…</span></span>
<span><span class="co">#&gt; $ effort_area_ha            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>4.04…</span></span>
<span><span class="co">#&gt; $ number_observers          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>13<span style="color: #949494;">, </span>13<span style="color: #949494;">, </span>7<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>5<span style="color: #949494;">, </span>10<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ all_species_reported      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TR…</span></span>
<span><span class="co">#&gt; $ group_identifier          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "G1131664"<span style="color: #949494;">, </span>"G1131665"<span style="color: #949494;">, </span>"G1158137"<span style="color: #949494;">, </span>"G115813…</span></span>
<span><span class="co">#&gt; $ has_media                 <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FA…</span></span>
<span><span class="co">#&gt; $ approved                  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TR…</span></span>
<span><span class="co">#&gt; $ reviewed                  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FALSE<span style="color: #949494;">, </span>FA…</span></span>
<span><span class="co">#&gt; $ reason                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ trip_comments             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"BCFO extension trip"<span style="color: #949494;">, </span>"BCFO extensi…</span></span>
<span><span class="co">#&gt; $ species_comments          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span></code></pre></div>
<p><code><a href="../reference/auk_filter.html">auk_filter()</a></code> returns an <code>auk_ebd</code> object with
the output file paths stored in it. This <code>auk_ebd</code> object can
then be passed directly to <code>auk_read()</code>, allowing for a
complete pipeline. For example, we can create an <code>auk_ebd</code>
object, define filters, filter with AWK, and read in the results all at
once.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="st">"ebd_filtered_blja-grja.txt"</span></span>
<span><span class="va">ebd_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_ebd.html">auk_ebd</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_species.html">auk_species</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Canada Jay"</span>, <span class="st">"Cyanocitta cristata"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_country.html">auk_country</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"Canada"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_filter.html">auk_filter</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">output_file</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/read_ebd.html">read_ebd</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="saving-the-awk-command">Saving the AWK command<a class="anchor" aria-label="anchor" href="#saving-the-awk-command"></a>
</h3>
<p>The AWK script can be saved for future reference by providing an
output filename to <code>awk_file</code>. In addition, by setting
<code>execute = FALSE</code> the AWK script will be generated but not
run.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">awk_script</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_ebd.html">auk_ebd</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_species.html">auk_species</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Canada Jay"</span>, <span class="st">"Cyanocitta cristata"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_country.html">auk_country</a></span><span class="op">(</span>country <span class="op">=</span> <span class="st">"Canada"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_filter.html">auk_filter</a></span><span class="op">(</span>awk_file <span class="op">=</span> <span class="st">"awk-script.txt"</span>, execute <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># read back in and prepare for printing</span></span>
<span><span class="va">awk_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span><span class="va">awk_script</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unlink.html" class="external-link">unlink</a></span><span class="op">(</span><span class="st">"awk-script.txt"</span><span class="op">)</span></span>
<span><span class="va">awk_file</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^[[:space:]]*$"</span>, <span class="va">awk_file</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span>collapse <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; BEGIN {</span></span>
<span><span class="co">#&gt;   FS = OFS = "   "</span></span>
<span><span class="co">#&gt;     split("Cyanocitta cristata   Perisoreus canadensis", speciesValues, "    ")</span></span>
<span><span class="co">#&gt;     for (i in speciesValues) species[speciesValues[i]] = 1</span></span>
<span><span class="co">#&gt;     split("CA", countryValues, " ")</span></span>
<span><span class="co">#&gt;     for (i in countryValues) countries[countryValues[i]] = 1</span></span>
<span><span class="co">#&gt; }</span></span>
<span><span class="co">#&gt; {</span></span>
<span><span class="co">#&gt;   keep = 1</span></span>
<span><span class="co">#&gt;   # filters</span></span>
<span><span class="co">#&gt;   if (keep == 1 &amp;&amp; ($7 in species)) {</span></span>
<span><span class="co">#&gt;     keep = 1</span></span>
<span><span class="co">#&gt;   } else {</span></span>
<span><span class="co">#&gt;     keep = 0</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt;   if (keep == 1 &amp;&amp; ($17 in countries)) {</span></span>
<span><span class="co">#&gt;     keep = 1</span></span>
<span><span class="co">#&gt;   } else {</span></span>
<span><span class="co">#&gt;     keep = 0</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt;   # keeps header</span></span>
<span><span class="co">#&gt;   if (NR == 1) {</span></span>
<span><span class="co">#&gt;     keep = 1</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt;   if (keep == 1) {</span></span>
<span><span class="co">#&gt;     print $0</span></span>
<span><span class="co">#&gt;   }</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="group-checklists">Group checklists<a class="anchor" aria-label="anchor" href="#group-checklists"></a>
</h3>
<p>eBird allows observers birding together to share checklists. This
process creates a new copy of the original checklist for each observer
with whom the original checklist was shared; these copies can then be
tweaked to add or remove some species that weren’t seen by the entire
group, or altering the sampling-event data. For most applications, it’s
best to remove these duplicate (or near-duplicate) checklists.
<code><a href="../reference/auk_unique.html">auk_unique()</a></code> removes duplicates resulting from group
checklists by selecting the observation with the lowest
<code>sampling_event_identifier</code> (a unique ID for each checklist);
this is the original checklists from which shared copies were generated.
In addition to removing duplicates, a <code>checklist_id</code> field is
added, which is equal to the <code>sampling_event_identifier</code> for
non-group checklists and the <code>group_identifier</code> for grouped
checklists. After running <code><a href="../reference/auk_unique.html">auk_unique()</a></code>, every species will
have a single entry for each <code>checklist_id</code>.</p>
<p><code><a href="../reference/read_ebd.html">read_ebd()</a></code> automatically runs <code><a href="../reference/auk_unique.html">auk_unique()</a></code>,
however, we can use <code>unique = FALSE</code> then manually run
<code><a href="../reference/auk_unique.html">auk_unique()</a></code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read in an ebd file and don't automatically remove duplicates</span></span>
<span><span class="va">ebd_dupes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-sample.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/read_ebd.html">read_ebd</a></span><span class="op">(</span>unique <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># remove duplicates</span></span>
<span><span class="va">ebd_unique</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_unique.html">auk_unique</a></span><span class="op">(</span><span class="va">ebd_dupes</span><span class="op">)</span></span>
<span><span class="co"># compare number of rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ebd_dupes</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 400</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ebd_unique</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 398</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="taxonomic-rollup">Taxonomic rollup<a class="anchor" aria-label="anchor" href="#taxonomic-rollup"></a>
</h3>
<p>The eBird Basic Dataset includes both true species and other taxa,
including domestics, hybrids, subspecies, “spuhs”, and recognizable
forms. In some cases, a checklist may contain multiple records for the
same species, for example, both Audubon’s and Myrtle Yellow-rumped
Warblers, as well as some records that are not resolvable to species,
for example, “warbler sp.”. For most use cases, a single record for each
species on each checklist is desired. The function
<code>ebd_rollup()</code> addresses these cases by removing taxa not
identifiable to species and rolling up taxa identified below species
level to a single record for each species in each checklist.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># read in sample data without rolling up</span></span>
<span><span class="va">ebd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ebd-rollup-ex.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/read_ebd.html">read_ebd</a></span><span class="op">(</span>rollup <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co"># apply roll up</span></span>
<span><span class="va">ebd_ru</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_rollup.html">auk_rollup</a></span><span class="op">(</span><span class="va">ebd</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># all taxa not identifiable to species are dropped</span></span>
<span><span class="co"># taxa below species have been rolled up to species</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ebd</span><span class="op">$</span><span class="va">category</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "domestic"   "form"       "hybrid"     "intergrade" "slash"     </span></span>
<span><span class="co">#&gt; [6] "spuh"       "species"    "issf"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ebd_ru</span><span class="op">$</span><span class="va">category</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "species"</span></span>
<span></span>
<span><span class="co"># yellow-rump warbler subspecies rollup</span></span>
<span><span class="co"># without rollup, there are three observations</span></span>
<span><span class="va">ebd</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">common_name</span> <span class="op">==</span> <span class="st">"Yellow-rumped Warbler"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">checklist_id</span>, <span class="va">category</span>, <span class="va">common_name</span>, <span class="va">subspecies_common_name</span>,</span>
<span>         <span class="va">observation_count</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 5</span></span></span>
<span><span class="co">#&gt;   checklist_id category   common_name   subspecies_common_name observation_count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> S44943108    intergrade Yellow-rumpe… Yellow-rumped Warbler… 1                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> S129851825   species    Yellow-rumpe… <span style="color: #BB0000;">NA</span>                     1                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> S129851825   issf       Yellow-rumpe… Yellow-rumped Warbler… 1                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> S129851825   issf       Yellow-rumpe… Yellow-rumped Warbler… 2</span></span>
<span><span class="co"># with rollup, they have been combined</span></span>
<span><span class="va">ebd_ru</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">common_name</span> <span class="op">==</span> <span class="st">"Yellow-rumped Warbler"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">checklist_id</span>, <span class="va">category</span>, <span class="va">common_name</span>, <span class="va">observation_count</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 4</span></span></span>
<span><span class="co">#&gt;   checklist_id category common_name           observation_count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> S129851825   species  Yellow-rumped Warbler 4                </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> S44943108    species  Yellow-rumped Warbler 1</span></span></code></pre></div>
<p>By default, <code><a href="../reference/read_ebd.html">read_ebd()</a></code> calls <code>ebd_rollup()</code>
when importing an eBird Basic Dataset file. To avoid this, and retain
subspecies, use <code>read_ebd(rollup = FALSE)</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="zero-filled-presence-absence-data">Zero-filled, presence-absence data<a class="anchor" aria-label="anchor" href="#zero-filled-presence-absence-data"></a>
</h2>
<p>For many applications, presence-only data are sufficient; however,
for modeling and analysis, presence-absence data are required. eBird
observers only explicitly collect presence data, but they have the
option of flagging their checklist as “complete” meaning that they are
reporting all the species they saw or heard, and identified. Therefore,
given a list of positive sightings (the basic dataset) and a list of all
checklists (the sampling event data) it is possible to infer absences by
filling zeros for all species not explicitly reported. This section of
the vignette describes functions for producing zero-filled,
presence-absence data.</p>
<div class="section level3">
<h3 id="filtering">Filtering<a class="anchor" aria-label="anchor" href="#filtering"></a>
</h3>
<p>When preparing to create zero-filled data, the eBird Basic Dataset
and sampling event data must be filtered to the same set of checklists
to ensure consistency. To ensure these two datasets are synced, provide
<em>both</em> to <code>auk_ebd</code>, then filter as described in the
previous section. This will ensure that all the filters applied to the
ebd (except species) will be applied to the sampling event data so that
we’ll be working with the same set of checklists. It is critical that
<code>auk_compete()</code> is called, since complete checklists are a
requirement for zero-filling.</p>
<p>For example, the following filters to only include sightings of
Collared Kingfisher between 6 and 10am:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># to produce zero-filled data, provide an EBD and sampling event data file</span></span>
<span><span class="va">f_ebd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/zerofill-ex_ebd.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span></span>
<span><span class="va">f_smp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/zerofill-ex_sampling.txt"</span>, package <span class="op">=</span> <span class="st">"auk"</span><span class="op">)</span></span>
<span><span class="va">filters</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_ebd.html">auk_ebd</a></span><span class="op">(</span><span class="va">f_ebd</span>, file_sampling <span class="op">=</span> <span class="va">f_smp</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_species.html">auk_species</a></span><span class="op">(</span><span class="st">"Collared Kingfisher"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_time.html">auk_time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"06:00"</span>, <span class="st">"10:00"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/auk_complete.html">auk_complete</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">filters</span></span>
<span><span class="co">#&gt; Input </span></span>
<span><span class="co">#&gt;   EBD: /private/var/folders/wf/y1p0nztd2ps95ppplsl5bjjr0000gs/T/RtmprjANm2/temp_libpath53c67c44101f/auk/extdata/zerofill-ex_ebd.txt </span></span>
<span><span class="co">#&gt;   Sampling events: /private/var/folders/wf/y1p0nztd2ps95ppplsl5bjjr0000gs/T/RtmprjANm2/temp_libpath53c67c44101f/auk/extdata/zerofill-ex_sampling.txt </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output </span></span>
<span><span class="co">#&gt;   Filters not executed</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Filters </span></span>
<span><span class="co">#&gt;   Species: Todiramphus chloris</span></span>
<span><span class="co">#&gt;   Countries: all</span></span>
<span><span class="co">#&gt;   States: all</span></span>
<span><span class="co">#&gt;   Counties: all</span></span>
<span><span class="co">#&gt;   BCRs: all</span></span>
<span><span class="co">#&gt;   Bounding box: full extent</span></span>
<span><span class="co">#&gt;   Years: all</span></span>
<span><span class="co">#&gt;   Date: all</span></span>
<span><span class="co">#&gt;   Start time: 06:00-10:00</span></span>
<span><span class="co">#&gt;   Last edited date: all</span></span>
<span><span class="co">#&gt;   Protocol: all</span></span>
<span><span class="co">#&gt;   Project code: all</span></span>
<span><span class="co">#&gt;   Duration: all</span></span>
<span><span class="co">#&gt;   Distance travelled: all</span></span>
<span><span class="co">#&gt;   Records with breeding codes only: no</span></span>
<span><span class="co">#&gt;   Exotic Codes: all</span></span>
<span><span class="co">#&gt;   Complete checklists only: yes</span></span></code></pre></div>
<p>As with presence-only data, call <code><a href="../reference/auk_filter.html">auk_filter()</a></code> to
actually run AWK. Output files must be provided for both the EBD and
sampling event data.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## ebd_sed_filtered &lt;- auk_filter(filters, </span></span>
<span><span class="co">##                                file = "ebd-filtered.txt",</span></span>
<span><span class="co">##                                file_sampling = "sampling-filtered.txt")</span></span>
<span><span class="va">ebd_sed_filtered</span></span>
<span><span class="co">#&gt; Input </span></span>
<span><span class="co">#&gt;   EBD: /private/var/folders/wf/y1p0nztd2ps95ppplsl5bjjr0000gs/T/RtmprjANm2/temp_libpath53c67c44101f/auk/extdata/zerofill-ex_ebd.txt </span></span>
<span><span class="co">#&gt;   Sampling events: /private/var/folders/wf/y1p0nztd2ps95ppplsl5bjjr0000gs/T/RtmprjANm2/temp_libpath53c67c44101f/auk/extdata/zerofill-ex_sampling.txt </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Output </span></span>
<span><span class="co">#&gt;   EBD: ebd-filtered.txt </span></span>
<span><span class="co">#&gt;   Sampling events: sampling-filtered.txt </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Filters </span></span>
<span><span class="co">#&gt;   Species: Todiramphus chloris</span></span>
<span><span class="co">#&gt;   Countries: all</span></span>
<span><span class="co">#&gt;   States: all</span></span>
<span><span class="co">#&gt;   Counties: all</span></span>
<span><span class="co">#&gt;   BCRs: all</span></span>
<span><span class="co">#&gt;   Bounding box: full extent</span></span>
<span><span class="co">#&gt;   Years: all</span></span>
<span><span class="co">#&gt;   Date: all</span></span>
<span><span class="co">#&gt;   Start time: 06:00-10:00</span></span>
<span><span class="co">#&gt;   Last edited date: all</span></span>
<span><span class="co">#&gt;   Protocol: all</span></span>
<span><span class="co">#&gt;   Project code: all</span></span>
<span><span class="co">#&gt;   Duration: all</span></span>
<span><span class="co">#&gt;   Distance travelled: all</span></span>
<span><span class="co">#&gt;   Records with breeding codes only: no</span></span>
<span><span class="co">#&gt;   Exotic Codes: all</span></span>
<span><span class="co">#&gt;   Complete checklists only: yes</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reading-and-zero-filling">Reading and zero-filling<a class="anchor" aria-label="anchor" href="#reading-and-zero-filling"></a>
</h3>
<p>The filtered datasets can now be combined into a zero-filled,
presence-absence dataset using <code><a href="../reference/auk_zerofill.html">auk_zerofill()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## ebd_zf &lt;- auk_zerofill(ebd_sed_filtered)</span></span>
<span><span class="va">ebd_zf</span></span>
<span><span class="co">#&gt; Zero-filled EBD: 131 unique checklists, for 1 species.</span></span></code></pre></div>
<p>Filenames or data frames of the basic dataset and sampling event data
can also be passed to <code><a href="../reference/auk_zerofill.html">auk_zerofill()</a></code>; see the documentation
for these cases. By default, <code><a href="../reference/auk_zerofill.html">auk_zerofill()</a></code> returns an
<code>auk_zerofill</code> object consisting of two data frames that can
be linked by a common <code>checklist_id</code> field:</p>
<ul>
<li>
<code>ebd_zf$sampling_events</code> contains the checklist
information</li>
<li>
<code>ebd_zf$observations</code> contains the species counts and a
binary presence-absence variable</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ebd_zf</span><span class="op">$</span><span class="va">observations</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   checklist_id scientific_name     breeding_code breeding_category behavior_code</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> G2470228     Todiramphus chloris <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>                <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> G366411      Todiramphus chloris <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>                <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> S10006552    Todiramphus chloris <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>                <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> S10006731    Todiramphus chloris <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>                <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> S10006786    Todiramphus chloris <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>                <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> S10011787    Todiramphus chloris <span style="color: #BB0000;">NA</span>            <span style="color: #BB0000;">NA</span>                <span style="color: #BB0000;">NA</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: age_sex &lt;chr&gt;, observation_count &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   species_observed &lt;lgl&gt;</span></span></span>
<span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">ebd_zf</span><span class="op">$</span><span class="va">sampling_events</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 131</span></span>
<span><span class="co">#&gt; Columns: 31</span></span>
<span><span class="co">#&gt; $ checklist_id              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "S9843037"<span style="color: #949494;">, </span>"S34396450"<span style="color: #949494;">, </span>"S9589770"<span style="color: #949494;">, </span>"S16642…</span></span>
<span><span class="co">#&gt; $ last_edited_date          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "2022-01-13 07:47:42.702684"<span style="color: #949494;">, </span>"2022-01-13 07…</span></span>
<span><span class="co">#&gt; $ country                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Singapore"<span style="color: #949494;">, </span>"Singapore"<span style="color: #949494;">, </span>"Singapore"<span style="color: #949494;">, </span>"Sing…</span></span>
<span><span class="co">#&gt; $ country_code              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "SG"<span style="color: #949494;">, </span>"SG"<span style="color: #949494;">, </span>"SG"<span style="color: #949494;">, </span>"SG"<span style="color: #949494;">, </span>"SG"<span style="color: #949494;">, </span>"SG"<span style="color: #949494;">, </span>"SG"<span style="color: #949494;">, </span>"S…</span></span>
<span><span class="co">#&gt; $ state                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Singapore"<span style="color: #949494;">, </span>"Singapore"<span style="color: #949494;">, </span>"Singapore"<span style="color: #949494;">, </span>"Sing…</span></span>
<span><span class="co">#&gt; $ state_code                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "SG-"<span style="color: #949494;">, </span>"SG-"<span style="color: #949494;">, </span>"SG-"<span style="color: #949494;">, </span>"SG-"<span style="color: #949494;">, </span>"SG-"<span style="color: #949494;">, </span>"SG-"<span style="color: #949494;">, </span>"S…</span></span>
<span><span class="co">#&gt; $ county                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ county_code               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ iba_code                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ bcr_code                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ usfws_code                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ atlas_block               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ locality                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Pulau Ubin"<span style="color: #949494;">, </span>"Pulau Ubin"<span style="color: #949494;">, </span>"Pulau Ubin"<span style="color: #949494;">, </span>"P…</span></span>
<span><span class="co">#&gt; $ locality_id               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "L1055540"<span style="color: #949494;">, </span>"L1055540"<span style="color: #949494;">, </span>"L1055540"<span style="color: #949494;">, </span>"L105554…</span></span>
<span><span class="co">#&gt; $ locality_type             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">, </span>"H"<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ latitude                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.403608<span style="color: #949494;">, </span>1.403608<span style="color: #949494;">, </span>1.403608<span style="color: #949494;">, </span>1.403608<span style="color: #949494;">, </span>1.35…</span></span>
<span><span class="co">#&gt; $ longitude                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 103.9688<span style="color: #949494;">, </span>103.9688<span style="color: #949494;">, </span>103.9688<span style="color: #949494;">, </span>103.9688<span style="color: #949494;">, </span>103.…</span></span>
<span><span class="co">#&gt; $ observation_date          <span style="color: #949494; font-style: italic;">&lt;date&gt;</span> 2012-02-16<span style="color: #949494;">, </span>2012-06-23<span style="color: #949494;">, </span>2012-01-15<span style="color: #949494;">, </span>2012-01…</span></span>
<span><span class="co">#&gt; $ time_observations_started <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "08:00:00"<span style="color: #949494;">, </span>"09:00:00"<span style="color: #949494;">, </span>"08:00:00"<span style="color: #949494;">, </span>"08:00:0…</span></span>
<span><span class="co">#&gt; $ observer_id               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "obs204697"<span style="color: #949494;">, </span>"obs816783"<span style="color: #949494;">, </span>"obs205759"<span style="color: #949494;">, </span>"obs4…</span></span>
<span><span class="co">#&gt; $ sampling_event_identifier <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "S9843037"<span style="color: #949494;">, </span>"S34396450"<span style="color: #949494;">, </span>"S9589770"<span style="color: #949494;">, </span>"S16642…</span></span>
<span><span class="co">#&gt; $ protocol_type             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Traveling"<span style="color: #949494;">, </span>"Traveling"<span style="color: #949494;">, </span>"Traveling"<span style="color: #949494;">, </span>"Trav…</span></span>
<span><span class="co">#&gt; $ protocol_code             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "P22"<span style="color: #949494;">, </span>"P22"<span style="color: #949494;">, </span>"P22"<span style="color: #949494;">, </span>"P22"<span style="color: #949494;">, </span>"P21"<span style="color: #949494;">, </span>"P22"<span style="color: #949494;">, </span>"P…</span></span>
<span><span class="co">#&gt; $ project_code              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "EBIRD"<span style="color: #949494;">, </span>"EBIRD"<span style="color: #949494;">, </span>"EBIRD_CAN"<span style="color: #949494;">, </span>"EBIRD_AU"<span style="color: #949494;">, </span>"…</span></span>
<span><span class="co">#&gt; $ duration_minutes          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 300<span style="color: #949494;">, </span>180<span style="color: #949494;">, </span>300<span style="color: #949494;">, </span>510<span style="color: #949494;">, </span>23<span style="color: #949494;">, </span>195<span style="color: #949494;">, </span>150<span style="color: #949494;">, </span>105<span style="color: #949494;">, </span>190<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ effort_distance_km        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1.609<span style="color: #949494;">, </span>4.000<span style="color: #949494;">, </span>3.000<span style="color: #949494;">, </span>10.000<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>3.000<span style="color: #949494;">, </span>3.00…</span></span>
<span><span class="co">#&gt; $ effort_area_ha            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ number_observers          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>12<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1…</span></span>
<span><span class="co">#&gt; $ all_species_reported      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TRUE<span style="color: #949494;">, </span>TR…</span></span>
<span><span class="co">#&gt; $ group_identifier          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ trip_comments             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "With Ailin Chuah on day trip"<span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span><span style="color: #BB0000;">NA</span><span style="color: #949494;">, </span>"Spe…</span></span></code></pre></div>
<p>This format is efficient for storage because the checklist
information isn’t duplicated, however, a single flat data frame is often
required for analysis. To collapse the two data frames together use
<code><a href="../reference/auk_zerofill.html">collapse_zerofill()</a></code>, or call <code><a href="../reference/auk_zerofill.html">auk_zerofill()</a></code>
with <code>collapse = TRUE</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## ebd_zf_df &lt;- auk_zerofill(ebd_filtered, collapse = TRUE)</span></span>
<span><span class="va">ebd_zf_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auk_zerofill.html">collapse_zerofill</a></span><span class="op">(</span><span class="va">ebd_zf</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ebd_zf_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "tbl_df"     "tbl"        "data.frame"</span></span>
<span><span class="va">ebd_zf_df</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 131 × 38</span></span></span>
<span><span class="co">#&gt;    checklist_id last_edited_date    country country_code state state_code county</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> S9843037     2022-01-13 07:47:4… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> S34396450    2022-01-13 07:47:4… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> S9589770     2023-01-31 19:39:0… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> S16642917    2023-01-31 19:39:0… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> S10410041    2013-10-14 16:08:30 Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> S10366236    2021-04-02 03:48:3… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> S34396153    2021-08-03 11:08:2… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> S9760550     2022-03-12 04:34:1… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> S16899954    2022-03-02 06:47:0… Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> S10920563    2019-08-10 00:41:22 Singap… SG           Sing… SG-        <span style="color: #BB0000;">NA</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 121 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 31 more variables: county_code &lt;chr&gt;, iba_code &lt;chr&gt;, bcr_code &lt;int&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   usfws_code &lt;chr&gt;, atlas_block &lt;chr&gt;, locality &lt;chr&gt;, locality_id &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   locality_type &lt;chr&gt;, latitude &lt;dbl&gt;, longitude &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   observation_date &lt;date&gt;, time_observations_started &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   observer_id &lt;chr&gt;, sampling_event_identifier &lt;chr&gt;, protocol_type &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   protocol_code &lt;chr&gt;, project_code &lt;chr&gt;, duration_minutes &lt;int&gt;, …</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="acknowledgements">Acknowledgements<a class="anchor" aria-label="anchor" href="#acknowledgements"></a>
</h2>
<p>This package is based on the AWK scripts provided in a presentation
given by Wesley Hochachka, Daniel Fink, Tom Auer, and Frank La Sorte at
the 2016 NAOC eBird Data Workshop on August 15, 2016.</p>
<p><code>auk</code> benefited significantly from the <a href="https://ropensci.org/" class="external-link">rOpenSci</a> review process, including
helpful suggestions from <a href="https://github.com/aurielfournier" class="external-link">Auriel Fournier</a> and <a href="https://github.com/emhart" class="external-link">Edmund Hart</a>.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<pre><code>eBird Basic Dataset. Version: ebd_relFeb-2018. Cornell Lab of Ornithology, Ithaca, New York. May 2013.

Guillera-Arroita, G., J.J. Lahoz-Monfort, J. Elith, A. Gordon, H. Kujala, P.E. Lentini, M.A. McCarthy, R. Tingley, and B.A. Wintle. 2015. Is my species distribution model fit for purpose? Matching data and models to applications. Global Ecology and Biogeography 24:276-292.</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://strimas.com" class="external-link">Matthew Strimas-Mackey</a>, <a href="http://eliotmiller.weebly.com/" class="external-link">Eliot Miller</a>, <a href="https://www.birds.cornell.edu/hochachka/" class="external-link">Wesley Hochachka</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

      </footer>
</div>






  </body>
</html>
